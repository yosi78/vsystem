<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מאגר מידע למורות</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>מאגר מידע למורות</h1>
            <p>version 0.5 
                <span id="connection-status" class="status-indicator status-disconnected">מנותק</span>
                <span id="user-info" class="user-info" style="display: none;"></span>
            </p>
        </div>

        <div class="content">
            <!-- מסך כניסה -->
            <div id="auth-screen" class="screen active">
                <!-- טפסי התחברות/הרשמה -->
            </div>

            <!-- מסך ראשי -->
            <div id="main-screen" class="screen">
                <div class="user-welcome">
                    <span id="welcome-message">שלום, </span>
                    <button class="logout-btn" onclick="logoutUser()">התנתק</button>
                </div>
                <div class="main-buttons" id="main-buttons"></div>
                <div style="text-align: center; margin-top: 30px;" id="admin-section">
                    <button class="btn" onclick="showAdminLogin()" style="background: #6c757d; font-size: 1rem; padding: 10px 20px;">
                        ניהול
                    </button>
                </div>
            </div>

            <!-- מסך תתי נושאים -->
            <div id="sub-screen" class="screen"></div>

            <!-- מסך משאב -->
            <div id="resource-screen" class="screen"></div>

            <!-- מסך מנהל -->
            <div id="admin-screen" class="screen">
                <button class="back-btn" onclick="showMainScreen()">← חזרה</button>
                <h2>פאנל מנהל</h2>
                
                <div class="admin-panel">
                    <!-- מצב גרירה -->
                    <button class="drag-mode-toggle" id="drag-mode-toggle" onclick="toggleDragMode()">🔄 הפעל מצב גרירה</button>
                    <div class="drag-instructions" id="drag-instructions">
                        <strong>🎯 מצב גרירה פעיל!</strong><br>
                        • גרור נושאים באמצעות כפתור ה"⋮⋮"<br>
                        • שחרר על נושא אחר כדי להזיז תחתיו<br>
                        • שחרר על האזור הירוק כדי להזיז לרמה הראשונה<br>
                        • לחץ שוב על כפתור הגרירה כדי לצאת מהמצב
                    </div>

                    <div class="admin-section">
                        <h3>נושאים ראשיים</h3>
                        <div id="main-topics-list"></div>
                        <div class="add-form">
                            <input type="text" class="add-input" id="new-main-topic" placeholder="נושא חדש">
                            <button class="add-btn" onclick="addMainTopic()">הוסף</button>
                        </div>
                    </div>

                    <div class="admin-section">
                        <h3>תתי נושאים</h3>
                        <div class="level-selector">
                            <label>בחר נושא ראשי:</label>
                            <select id="topic-select" class="add-input">
                                <option value="">בחר נושא ראשי</option>
                            </select>
                        </div>
                        
                        <div class="level-selector" id="parent-selector" style="display: none;">
                            <label>בחר תת נושא עליון (אופציונלי):</label>
                            <select id="parent-select" class="add-input">
                                <option value="">ללא נושא עליון (רמה ראשונה)</option>
                            </select>
                        </div>

                        <div id="sub-topics-list"></div>
                        <div class="add-form">
                            <input type="text" class="add-input" id="new-sub-topic" placeholder="תת נושא חדש">
                            <input type="text" class="add-input" id="new-drive-link" placeholder="קישור לגוגל דרייב (רק אם זה מסמך סופי)">
                            <input type="text" class="add-input" id="new-file-owner" placeholder="שם בעל הקובץ (אופציונלי)">
                            <button class="add-btn" type="button" onclick="addSubTopic()">הוסף תת נושא</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <a href="mailto:yosiel3@gmail.com?subject=בנוגע למערכת מאגר מידע&body=שלום יוסי," class="footer-name">ByteLogicx</a>
            <div class="footer-copyright">© 2023 כל הזכויות שמורות</div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-database-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-auth-compat.min.js"></script>
    
    <script src="script.js"></script>
</body>
</html>
