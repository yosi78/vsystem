<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מערכת ניהול תקלות - בית ספר</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app"></div>

    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <div class="login-card">
                <h1>🏫 כניסה למערכת</h1>
                <p class="login-subtitle">מערכת ניהול תקלות לבית ספר</p>

                <form id="loginForm" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="email">דוא״ל</label>
                        <input 
                            type="email" 
                            id="email" 
                            placeholder="הכנס דוא״ל"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="password">סיסמה</label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="password" 
                                placeholder="הכנס סיסמה"
                                required
                            >
                            <button 
                                type="button" 
                                class="password-toggle"
                                onclick="togglePassword()"
                            >👁️</button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-large">
                        כניסה
                    </button>
                </form>

                <div class="test-accounts">
                    <h3>חשבונות למבחן:</h3>
                    <div class="account-card teacher">
                        <strong>👩‍🏫 מורה א:</strong>
                        <p>teacher1@school.com</p>
                    </div>
                    <div class="account-card teacher">
                        <strong>👨‍🏫 מורה ב:</strong>
                        <p>teacher2@school.com</p>
                    </div>
                    <div class="account-card admin">
                        <strong>👨‍💼 מנהל:</strong>
                        <p>admin@school.com</p>
                    </div>
                    <div class="account-card maintenance">
                        <strong>🔧 אב בית:</strong>
                        <p>maintenance@school.com</p>
                    </div>
                    <p class="account-hint">כל הסיסמות: כל דבר או קלקל 123</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="screen">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-title">
                    <h1>🏫 מערכת ניהול תקלות</h1>
                    <p class="header-user" id="headerUser"></p>
                </div>
                <button class="btn btn-logout" onclick="handleLogout()">
                    התנתקות
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Teacher Dashboard -->
            <div id="teacherDashboard" class="dashboard">
                <div class="dashboard-header">
                    <h2>דשבורד המורים</h2>
                    <button class="btn btn-success" onclick="toggleAddTicketForm()">
                        ➕ דווח תקלה חדשה
                    </button>
                </div>

                <!-- Add Ticket Form -->
                <div id="addTicketForm" class="card hidden">
                    <h3>דיווח תקלה חדשה</h3>
                    <form onsubmit="addTicket(event)">
                        <div class="form-group">
                            <label for="ticketTitle">כותרת</label>
                            <input 
                                type="text" 
                                id="ticketTitle" 
                                placeholder="מה הבעיה?"
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label for="ticketDescription">תיאור מפורט</label>
                            <textarea 
                                id="ticketDescription" 
                                placeholder="תיאור מלא של התקלה"
                                rows="4"
                                required
                            ></textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="ticketLocation">מיקום</label>
                                <input 
                                    type="text" 
                                    id="ticketLocation" 
                                    placeholder="כיתה / מרחב משותף"
                                    required
                                >
                            </div>

                            <div class="form-group">
                                <label for="ticketCategory">קטגוריה</label>
                                <select id="ticketCategory" required>
                                    <option value="חשמל">חשמל</option>
                                    <option value="מים">מים</option>
                                    <option value="ריהוט">ריהוט</option>
                                    <option value="מחשוב">מחשוב</option>
                                    <option value="בטיחות">בטיחות</option>
                                    <option value="אחר">אחר</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-buttons">
                            <button type="submit" class="btn btn-primary">שלח דיווח</button>
                            <button type="button" class="btn btn-secondary" onclick="toggleAddTicketForm()">ביטול</button>
                        </div>
                    </form>
                </div>

                <!-- Tickets List -->
                <div class="card">
                    <h3>התקלות שלך (<span id="teacherTicketCount">0</span>)</h3>
                    <div id="teacherTicketsList" class="tickets-list">
                        <p class="empty-state">לא דיווחת על תקלות עדיין</p>
                    </div>
                </div>
            </div>

            <!-- Admin Dashboard -->
            <div id="adminDashboard" class="dashboard hidden">
                <div class="dashboard-header">
                    <h2>דשבורד המנהל</h2>
                </div>

                <!-- Filters -->
                <div class="card filters-card">
                    <h3>סינון תקלות</h3>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label for="filterStatus">סטטוס</label>
                            <select id="filterStatus" onchange="applyFilters()">
                                <option value="all">הכל</option>
                                <option value="open">פתוחה</option>
                                <option value="assigned">הוקצתה</option>
                                <option value="in_progress">בטיפול</option>
                                <option value="completed">הושלמה</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="filterPriority">עדיפות</label>
                            <select id="filterPriority" onchange="applyFilters()">
                                <option value="all">הכל</option>
                                <option value="high">גבוה</option>
                                <option value="medium">בינוני</option>
                                <option value="low">נמוך</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label for="filterCategory">קטגוריה</label>
                            <select id="filterCategory" onchange="applyFilters()">
                                <option value="all">הכל</option>
                                <option value="חשמל">חשמל</option>
                                <option value="מים">מים</option>
                                <option value="ריהוט">ריהוט</option>
                                <option value="מחשוב">מחשוב</option>
                                <option value="בטיחות">בטיחות</option>
                                <option value="אחר">אחר</option>
                            </select>
                        </div>

                        <div class="stats-box">
                            <p class="stats-number" id="statsCount">0</p>
                            <p class="stats-label">תקלות</p>
                        </div>
                    </div>
                </div>

                <!-- Tickets and Details Layout -->
                <div class="admin-layout">
                    <!-- Tickets List -->
                    <div class="card tickets-column">
                        <h3>רשימת תקלות</h3>
                        <div id="adminTicketsList" class="tickets-list">
                            <p class="empty-state">לא קיימות תקלות</p>
                        </div>
                    </div>

                    <!-- Ticket Details -->
                    <div id="ticketDetailsPanel" class="card details-column hidden">
                        <h3>פרטי התקלה</h3>
                        <div id="ticketDetails"></div>
                    </div>
                </div>
            </div>

            <!-- Maintenance Dashboard -->
            <div id="maintenanceDashboard" class="dashboard hidden">
                <div class="dashboard-header">
                    <h2>דשבורד אב הבית</h2>
                    <p class="header-info" id="maintenanceTaskCount">משימות להשלמה: 0</p>
                </div>

                <!-- Tasks and Details Layout -->
                <div class="admin-layout">
                    <!-- Tasks List -->
                    <div class="card tickets-column">
                        <h3>המשימות שלי</h3>
                        <div id="maintenanceTasksList" class="tickets-list">
                            <p class="empty-state">אין משימות בהקצאה</p>
                        </div>
                    </div>

                    <!-- Task Details -->
                    <div id="taskDetailsPanel" class="card details-column hidden">
                        <h3>פרטי המשימה</h3>
                        <div id="taskDetails"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
